{"version":3,"sources":["constants/successMessage.ts","pages/MyProfile/index.tsx"],"names":["SuccessMessage","WallectConnect","removeCard","MyUserProfile","useState","loading","setIsLoading","enqueueSnackbar","useSnackbar","useWeb3React","activate","active","account","navigate","deactivate","useNavigate","deviceId","useDeviceId","useSelector","state","userDetails","isLoading","provider","localStorage","getItem","React","useEffect","connectWallet","ConnectWallet","error","console","log","removeItem","signOutUser","Client","patch","apiRoutes","trustDevice","token","data","post","signOut","refreshToken","statusCode","HttpStatus","OK","sessionStorage","routes","signInPage","walletConnectApi","useCallback","cryptoWallets","address","type","preventDuplicate","variant","persist","Errors","appError","walletConnect","length","setItem","className","background","src","alt","profilePhoto","firstName","lastName","username","onClick","viewBalance","isWalletActive","primary","SwarayCoinLogo","wallet","pts","substring","disabled","memo"],"mappings":"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","file":"static/js/11.e9a01c7c.chunk.js","sourcesContent":["export const SuccessMessage = {\n  WallectConnect: 'wallet Connected Successfully',\n  removeCard: 'Card removed Successfully'\n};\n","import React, { useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { useNavigate } from 'react-router-dom';\nimport { useWeb3React } from '@web3-react/core';\nimport { useSnackbar } from 'notistack';\n\n//Material Design\nimport { Avatar, Button } from '@mui/material';\n\nimport List from '@mui/material/List';\nimport ListItem from '@mui/material/ListItem';\nimport ListItemText from '@mui/material/ListItemText';\nimport KeyboardArrowRightIcon from '@mui/icons-material/KeyboardArrowRight';\n\nimport { SwarayCoinLogo } from '../../assets/img';\nimport { UserDetails } from '../../common/interface/userDetails.interface';\nimport { AppLoader } from '../../components';\n\n//styles\nimport './style.scss';\nimport { Client } from '../../config';\nimport { apiRoutes } from '../../constants/apiRoutes';\nimport routes from '../../constants/routes';\nimport { HttpStatus } from '../../common/enum/statusCode.enum';\nimport { ConnectWallet } from '../../config';\nimport { Errors } from '../../constants/errors';\nimport { SuccessMessage } from '../../constants/successMessage';\nimport { useDeviceId } from '../../hooks';\n\ninterface loggedInUser {\n  userDetails: {\n    userDetails: UserDetails;\n    isLoading: boolean;\n  };\n}\n\ninterface userDetails {\n  userDetails: UserDetails;\n  isLoading: boolean;\n}\n\ninterface Istate {\n  refreshToken: string;\n}\n\nconst MyUserProfile = () => {\n  const [loading, setIsLoading] = useState<boolean>(false);\n\n  const { enqueueSnackbar } = useSnackbar();\n\n  const { activate, active, account, deactivate } = useWeb3React();\n\n  const navigate = useNavigate();\n\n  const deviceId = useDeviceId();\n\n  const { userDetails, isLoading }: userDetails = useSelector(\n    (state: loggedInUser) => state?.userDetails\n  );\n\n  const provider = localStorage.getItem('provider');\n\n  React.useEffect(() => {\n    const connectWallet = localStorage.getItem('walletconnect');\n    if (provider || connectWallet) {\n      activate(ConnectWallet, (error) => {\n        console.log(error);\n        localStorage.removeItem('provider');\n      });\n    }\n  }, []);\n\n  const signOutUser = async () => {\n    setIsLoading(true);\n    const { data: token } = await Client.patch(apiRoutes.trustDevice, {\n      deviceId,\n    });\n\n    const { data } = await Client.post(apiRoutes.signOut, {\n      refreshToken: token.data?.refreshToken?.token,\n    });\n    setIsLoading(false);\n    if (data?.statusCode === HttpStatus.OK) {\n      localStorage.removeItem('usertk');\n      sessionStorage.removeItem('usertk');\n      localStorage.removeItem('walletconnect');\n      localStorage.removeItem('provider');\n      navigate(routes.signInPage);\n    }\n  };\n\n  const walletConnectApi = React.useCallback(async () => {\n    if (provider && account) {\n      const { data } = await Client.post(apiRoutes.cryptoWallets, {\n        address: account,\n        type: provider,\n      });\n      if (data?.data) {\n        enqueueSnackbar(SuccessMessage.WallectConnect, {\n          preventDuplicate: true,\n          variant: 'success',\n          persist: false,\n        });\n      } else {\n        enqueueSnackbar(Errors.appError, {\n          preventDuplicate: true,\n          variant: 'error',\n          persist: false,\n        });\n      }\n    }\n  }, [account, provider]);\n\n  const walletConnect = async () => {\n    if (userDetails.cryptoWallets?.length >= 0) {\n      localStorage.setItem('provider', 'walletConnect');\n      await activate(ConnectWallet, (error) => {\n        console.log('error', error);\n        localStorage.removeItem('provider');\n      });\n      await walletConnectApi();\n    }\n  };\n\n  /*\n    TODO: need to implement this method once client confirmation\n  */\n\n  const disConnectWallet = async () => {\n    await deactivate();\n    localStorage.removeItem('provider');\n    await Client.get(apiRoutes.removeWallets);\n  };\n\n  return (\n    <>\n      <div className='my-profile-content'>\n        <div className='profile-header'>\n          <div className='profile-image'>\n            {userDetails?.background && (\n              <img src={userDetails?.background} alt='profile' />\n            )}\n          </div>\n          <div className='d-flex align-end h-100 px-20 py-16 relative index-2'>\n            <div className='mr-12'>\n              <Avatar\n                alt='AK'\n                src={userDetails?.profilePhoto}\n                className='profile-img bordered-white'\n              />\n            </div>\n            <div className='flex-1'>\n              <h3 className='f-18 f-w-600 l-h-normal txt-primary'>\n                {userDetails?.firstName} {userDetails?.lastName}\n              </h3>\n              <p className='f-14 f-w-400 l-h-normal txt-color-primary mt-4'>\n                @{userDetails?.username}\n              </p>\n            </div>\n          </div>\n        </div>\n        <div className='p-20'>\n          <List className='my-profile-menu d-grid g-8'>\n            <ListItem\n              onClick={() =>\n                navigate(routes.viewBalance, {\n                  state: {\n                    isWalletActive: active,\n                  },\n                })\n              }\n            >\n              <div className='d-flex align-center justify-between w-100'>\n                <div className='flex-1 d-flex justify-between'>\n                  <ListItemText primary='My Balance' />\n                  <div className='d-flex align-center'>\n                    <img\n                      src={SwarayCoinLogo}\n                      alt=''\n                      className='img sawaray-coin-img'\n                    />\n                    <p className='f-14 f-w-500 l-h-normal txt-primary ml-4'>\n                      {userDetails?.wallet?.pts}\n                    </p>\n                  </div>\n                </div>\n                <KeyboardArrowRightIcon className='txt-secondary' />\n              </div>\n            </ListItem>\n            <ListItem>\n              <div className='d-flex justify-between w-100'>\n                <div className={active ? 'connected-dot' : 'active-dot'} />\n                <ListItemText\n                  onClick={walletConnect}\n                  primary={\n                    !active\n                      ? 'Connect crypto wallet'\n                      : `${\n                          account && account?.length >= 15\n                            ? `${account?.substring(0, 15)}... Connected`\n                            : account\n                        }`\n                  }\n                  className='flex-1'\n                />\n                <KeyboardArrowRightIcon className='txt-secondary' />\n              </div>\n            </ListItem>\n            <ListItem disabled>\n              <div className='d-flex justify-between w-100'>\n                <ListItemText primary='My Fan Pages' className='flex-1' />\n                <KeyboardArrowRightIcon className='txt-secondary' />\n              </div>\n            </ListItem>\n            <ListItem disabled>\n              <div className='d-flex justify-between w-100'>\n                <ListItemText primary='Favorites' className='flex-1' />\n                <KeyboardArrowRightIcon className='txt-secondary' />\n              </div>\n            </ListItem>\n            <ListItem disabled>\n              <div className='d-flex justify-between w-100'>\n                <ListItemText\n                  primary='Monthly subscriptions'\n                  className='flex-1'\n                />\n                <KeyboardArrowRightIcon className='txt-secondary' />\n              </div>\n            </ListItem>\n            <ListItem disabled>\n              <div className='d-flex justify-between w-100'>\n                <ListItemText primary='Account settings' className='flex-1' />\n                <KeyboardArrowRightIcon className='txt-secondary' />\n              </div>\n            </ListItem>\n          </List>\n          <div className='text-center mt-32 mb-20'>\n            <Button\n              onClick={signOutUser}\n              className='f-16 f-w-500 l-h-normal txt-primary'\n            >\n              Sign out\n            </Button>\n          </div>\n        </div>\n      </div>\n      <AppLoader loading={isLoading || loading} />\n    </>\n  );\n};\n\nexport default React.memo(MyUserProfile);\n"],"sourceRoot":""}