{"version":3,"sources":["constants/successMessage.ts","common/enum/subscription.enum.ts","pages/ConfirmPurchase/index.tsx"],"names":["SuccessMessage","WallectConnect","removeCard","PaymentType","Currency","ConfirmPurchase","useState","loading","setLoading","state","useLocation","enqueueSnackbar","useSnackbar","useSelector","userDetails","isLoading","selectedPoints","subscription","useQuery","Client","get","apiRoutes","cardList","data","cardLoading","refetch","cardsList","makePayment","paymentBody","productId","stripeProductId","oneTime","paymentMethod","SUBSCRIPTION","PAYMENT","currency","USD","post","stripeCheckout","response","location","href","message","statusCode","preventDuplicate","persist","variant","cardId","delete","deleteCard","Errors","appError","className","cost","totalAmount","length","map","item","index","isCreditCard","nameOnCard","cardNumber","expiryMonth","expiryYear","Button","onClick","color","size","fullWidth","React","memo"],"mappings":"iHAAA,kCAAO,IAAMA,EAAiB,CAC5BC,eAAgB,gCAChBC,WAAY,4B,oECFFC,EAKAC,E,8HALAD,K,kBAAAA,E,6BAAAA,M,cAKAC,K,WAAAA,M,kCCqCNC,EAAkB,WACtB,MAA8BC,oBAAkB,GAAhD,mBAAOC,EAAP,KAAgBC,EAAhB,KAEQC,EAAUC,cAAVD,MAEAE,EAAoBC,cAApBD,gBAER,EAAmCE,aACjC,SAACJ,GAAD,cAAyBA,QAAzB,IAAyBA,OAAzB,EAAyBA,EAAOK,WAAhC,IADMC,EAAR,EAAQA,UAIR,EAAyCN,EAAjCO,EAAR,EAAQA,eAAgBC,EAAxB,EAAwBA,aAExB,EAIIC,mBAAS,aAAa,kBAAMC,IAAOC,IAAIC,IAAUC,SAA3B,IAHxBC,EADF,EACEA,KACWC,EAFb,EAEET,UACAU,EAHF,EAGEA,QAGIC,EAAyB,OAAGH,QAAH,IAAGA,OAAH,EAAGA,EAAMA,KAAKA,KAEvCI,EAAW,iDAAG,2GAClBnB,GAAW,GACLoB,EAAc,CAClBC,UAAWZ,EACPD,EAAec,gBAAgBb,aAC/BD,EAAec,gBAAgBC,QACnCC,cAAef,EACXd,EAAY8B,aACZ9B,EAAY+B,QAChBC,SAAU/B,EAASgC,KATH,SAWKjB,IAAOkB,KAAKhB,IAAUiB,eAAgBV,GAX3C,QAWZW,EAXY,QAYLhB,MACXf,GAAW,GAEXgC,SAASC,KAAOF,EAAShB,KAAKA,OAE9Bf,GAAW,GADN,EAMD+B,EAHFA,SACEhB,KAAQmB,EAJP,EAIOA,QAJP,EAIgBC,WAIrBhC,EAAgB+B,EAAS,CACvBE,kBAAkB,EAClBC,SAAS,EACTC,QAAS,WA3BK,2CAAH,qDAgCX5C,EAAU,iDAAG,WAAO6C,GAAP,wFACjBvC,GAAW,GADM,kBAGQW,IAAO6B,OAAP,UAAiB3B,IAAU4B,YAA3B,OAAwCF,IAHhD,kBAGPxB,KACCA,OACPZ,EAAgBX,IAAeE,WAAY,CACzC0C,kBAAkB,EAClBC,SAAS,EACTC,QAAS,UAEXrB,KAVa,gDAafd,EAAgBuC,IAAOC,SAAU,CAC/BP,kBAAkB,EAClBC,SAAS,EACTC,QAAS,UAhBI,yBAmBftC,GAAW,GAnBI,4EAAH,sDAuBhB,OACE,qCACE,qBAAK4C,UAAU,+BAAf,SACE,sBAAKA,UAAU,2CAAf,UACE,gCACE,oBAAIA,UAAU,wDAAd,sBAIA,cAAC,IAAD,CACEpC,eAAgBA,EAChBC,aAAcA,IAIhB,sBAAKmC,UAAU,QAAf,UACE,sBAAKA,UAAU,yBAAf,UACE,sBAAKA,UAAU,yBAAf,UACE,mBAAGA,UAAU,sCAAb,sBAGA,oBAAGA,UAAU,4CAAb,cACIpC,EAAeqC,WAGrB,sBAAKD,UAAU,+BAAf,UACE,oBAAGA,UAAU,sCAAb,2BACiB,IACf,sBAAMA,UAAU,OAAhB,kCAEF,mBAAGA,UAAU,4CAAb,yBAMJ,sBAAKA,UAAU,oEAAf,UACE,mBAAGA,UAAU,sCAAb,mBACA,oBAAGA,UAAU,4CAAb,cACIpC,EAAesC,qBAMvB,gCACE,mBAAGF,UAAU,sCAAb,6BAGU,OAAT1B,QAAS,IAATA,KAAW6B,OACV,mBAAGH,UAAU,kDAAb,oCAIA,mBAAGA,UAAU,8DAAb,4BATJ,OAcG1B,QAdH,IAcGA,OAdH,EAcGA,EAAW8B,KAAI,SAACC,EAAMC,GAAP,OACd,sBAEEN,UAAU,4CAFZ,UAIE,gCACE,mBAAGA,UAAU,4CAAb,SACGK,EAAKE,aAAe,cAAgB,eAEvC,mBAAGP,UAAU,sCAAb,SACGK,EAAKG,aAER,oBAAGR,UAAU,2CAAb,4BACkBK,EAAKI,cAEvB,mBAAGT,UAAU,4CAAb,mBAA6DK,EAAKK,YAAlE,YAAiFL,EAAKM,iBAExF,cAACC,EAAA,EAAD,CACEC,QAAS,kBAAM/D,EAAWuD,EAAKV,OAAtB,EACTD,QAAQ,YACRoB,MAAM,UACNC,KAAK,QAJP,2BAfKT,EAFO,OA6DlB,cAAC,IAAD,OAEF,qBAAKN,UAAU,QAAf,SAEE,cAACY,EAAA,EAAD,CACEC,QAAStC,EACTmB,QAAQ,YACRoB,MAAM,YACNC,KAAK,QACLC,WAAS,EALX,qCAYN,cAAC,IAAD,CAAW7D,QAASQ,GAAaR,GAAWiB,MAGjD,EAEc6C,cAAMC,KAAKjE,E","file":"static/js/10.b0dded98.chunk.js","sourcesContent":["export const SuccessMessage = {\n  WallectConnect: 'wallet Connected Successfully',\n  removeCard: 'Card removed Successfully'\n};\n","export enum PaymentType {\n  PAYMENT = 'payment',\n  SUBSCRIPTION = 'subscription'\n}\n\nexport enum Currency {\n  USD = 'usd'\n}\n","import React, { useState } from 'react';\nimport { useLocation, Navigate } from 'react-router-dom';\nimport { useSelector } from 'react-redux';\nimport { useSnackbar } from 'notistack';\nimport { AxiosError } from 'axios';\nimport { useQuery } from 'react-query';\n\n//Material Design\nimport { FormControl, Button } from '@mui/material';\nimport { Input } from '../../components';\n\nimport { AppLoader } from '../../components';\nimport { PoinstPackageList } from '../../common/interface/pointsPackage.interface';\n\nimport { CartHeader, PaymentTerms } from '../../components';\n\n//styles\nimport './style.scss';\nimport { Client } from '../../config';\nimport { apiRoutes } from '../../constants/apiRoutes';\nimport { PaymentType, Currency } from '../../common/enum/subscription.enum';\nimport { CardsDetails } from '../../common/interface/CardsDetails.interface';\nimport { SuccessMessage } from '../../constants/successMessage';\nimport { Errors } from '../../constants/errors';\n\ninterface Istate {\n  selectedPoints: PoinstPackageList;\n  subscription: boolean;\n}\n\ninterface UserDetails {\n  userDetails: UserDetails;\n  isLoading: boolean;\n}\n\ninterface LoggedInUser {\n  userDetails: {\n    userDetails: UserDetails;\n    isLoading: boolean;\n  };\n}\n\nconst ConfirmPurchase = () => {\n  const [loading, setLoading] = useState<boolean>(false);\n\n  const { state } = useLocation();\n\n  const { enqueueSnackbar } = useSnackbar();\n\n  const { isLoading }: UserDetails = useSelector(\n    (state: LoggedInUser) => state?.userDetails\n  );\n\n  const { selectedPoints, subscription } = state as Istate;\n\n  const {\n    data,\n    isLoading: cardLoading,\n    refetch,\n  } = useQuery('cardsList', () => Client.get(apiRoutes.cardList));\n\n  const cardsList: CardsDetails[] = data?.data.data;\n\n  const makePayment = async () => {\n    setLoading(true);\n    const paymentBody = {\n      productId: subscription\n        ? selectedPoints.stripeProductId.subscription\n        : selectedPoints.stripeProductId.oneTime,\n      paymentMethod: subscription\n        ? PaymentType.SUBSCRIPTION\n        : PaymentType.PAYMENT,\n      currency: Currency.USD,\n    };\n    const response = await Client.post(apiRoutes.stripeCheckout, paymentBody);\n    if (response.data) {\n      setLoading(false);\n      // eslint-disable-next-line no-restricted-globals\n      location.href = response.data.data;\n    } else {\n      setLoading(false);\n      const {\n        response: {\n          data: { message, statusCode },\n        },\n      } = response as AxiosError | any;\n\n      enqueueSnackbar(message, {\n        preventDuplicate: false,\n        persist: false,\n        variant: 'error',\n      });\n    }\n  };\n\n  const removeCard = async (cardId: string) => {\n    setLoading(true);\n    try {\n      const { data } = await Client.delete(`${apiRoutes.deleteCard}${cardId}`);\n      if (data.data) {\n        enqueueSnackbar(SuccessMessage.removeCard, {\n          preventDuplicate: false,\n          persist: false,\n          variant: 'error',\n        });\n        refetch();\n      }\n    } catch (err) {\n      enqueueSnackbar(Errors.appError, {\n        preventDuplicate: false,\n        persist: false,\n        variant: 'error',\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <>\n      <div className='my-subscription-content p-24'>\n        <div className='d-flex flex-column justify-between h-100'>\n          <div>\n            <h3 className='f-18 f-w-500 l-h-normal txt-primary text-center mb-24'>\n              Checkout\n            </h3>\n\n            <CartHeader\n              selectedPoints={selectedPoints}\n              subscription={subscription}\n            />\n\n            {/* Subtotal Page Details */}\n            <div className='my-20'>\n              <div className='border-top-light py-16'>\n                <div className='d-flex justify-between'>\n                  <p className='f-16 f-w-400 l-h-normal txt-primary'>\n                    Subtotal\n                  </p>\n                  <p className='f-16 f-w-400 l-h-normal txt-color-primary'>\n                    ${selectedPoints.cost}\n                  </p>\n                </div>\n                <div className='d-flex justify-between mt-10'>\n                  <p className='f-16 f-w-400 l-h-normal txt-primary'>\n                    Processing Fee{' '}\n                    <span className='f-12'>(30 cents + 2.9%)</span>\n                  </p>\n                  <p className='f-16 f-w-400 l-h-normal txt-color-primary'>\n                    $0.51\n                  </p>\n                </div>\n              </div>\n\n              <div className='d-flex justify-between py-12 border-top-light border-bottom-light'>\n                <p className='f-16 f-w-700 l-h-normal txt-primary'>Total</p>\n                <p className='f-16 f-w-400 l-h-normal txt-color-primary'>\n                  ${selectedPoints.totalAmount}\n                </p>\n              </div>\n            </div>\n\n            {/* Card Details */}\n            <div>\n              <p className='f-18 f-w-500 l-h-normal txt-primary'>\n                Payment Details\n              </p>\n              {cardsList?.length ? (\n                <p className='f-14 f-w-400 l-h-normal txt-primary mt-20 mb-16'>\n                  Your Save Card Details\n                </p>\n              ) : (\n                <p className='f-14 f-w-400 l-h-normal txt-primary mt-20 mb-16 text-center'>\n                  Card not found\n                </p>\n              )}\n\n              {cardsList?.map((item, index) => (\n                <div\n                  key={index}\n                  className='d-flex align-center justify-between mb-16'\n                >\n                  <div>\n                    <p className='f-14 f-w-400 l-h-normal txt-tertiary mb-6'>\n                      {item.isCreditCard ? 'Credit Card' : 'Debit Card'}\n                    </p>\n                    <p className='f-14 f-w-400 l-h-normal txt-primary'>\n                      {item.nameOnCard}\n                    </p>\n                    <p className='f-14 f-w-400 l-h-normal txt-primary mt-4'>\n                      .... .... .... {item.cardNumber}\n                    </p>\n                    <p className='f-14 f-w-400 l-h-normal txt-tertiary mt-6'>{`${item.expiryMonth}/${item.expiryYear}`}</p>\n                  </div>\n                  <Button\n                    onClick={() => removeCard(item.cardId)}\n                    variant='contained'\n                    color='primary'\n                    size='small'\n                  >\n                    Remove Card\n                  </Button>\n                </div>\n              ))}\n            </div>\n\n            {/* Add Card Form Section */}\n            {/* <div>\n                <p className=\"f-18 f-w-500 l-h-normal txt-primary\">Payment Details</p>\n\n                <div className=\"mt-24\">\n                  <FormControl variant=\"outlined\" fullWidth className=\"mb-16\">\n                    <label className=\"form-label\">Name On Card</label>\n                    <Input id=\"outlined-adornment-weight\" placeholder=\"Name\" />\n                  </FormControl>\n                  <div className=\"d-flex c-g-20\">\n                    <FormControl variant=\"outlined\" fullWidth className=\"flex-2 mb-16\">\n                      <label className=\"form-label\">Card Number</label>\n                      <Input id=\"outlined-adornment-weight\" placeholder=\"000-000-000-000\" />\n                    </FormControl>\n                    <FormControl variant=\"outlined\" fullWidth className=\"flex-1 mb-16\">\n                      <label className=\"form-label\">CVC</label>\n                      <Input id=\"outlined-adornment-weight\" placeholder=\"123\" />\n                    </FormControl>\n                  </div>\n                  <div className=\"d-flex c-g-20\">\n                    <FormControl variant=\"outlined\" fullWidth className=\"mb-16\">\n                      <label className=\"form-label\">Expiration Date</label>\n                      <Input id=\"outlined-adornment-weight\" placeholder=\"MM / DD\" />\n                    </FormControl>\n                    <FormControl variant=\"outlined\" fullWidth className=\"mb-16\">\n                      <label className=\"form-label\">Postal Code</label>\n                      <Input id=\"outlined-adornment-weight\" placeholder=\"123\" />\n                    </FormControl>\n                  </div>\n                </div>\n              </div> */}\n\n            <PaymentTerms />\n          </div>\n          <div className='pb-24'>\n            {/* Add card payments */}\n            <Button\n              onClick={makePayment}\n              variant='contained'\n              color='secondary'\n              size='large'\n              fullWidth\n            >\n              Confirm Purchase\n            </Button>\n          </div>\n        </div>\n      </div>\n      <AppLoader loading={isLoading || loading || cardLoading} />\n    </>\n  );\n};\n\nexport default React.memo(ConfirmPurchase);\n"],"sourceRoot":""}